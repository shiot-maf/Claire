<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>관리자 페이지</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f4f6f9;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 30px;
      background: #fff;
    }
    .layout {
      display: flex;
      gap: 30px;
    }
    .left-column {
      flex: 1;
      min-width: 250px;
    }
    .right-column {
      flex: 3;
    }
    h1 {
      color: #14532d;
      font-size: 24px;
      margin-bottom: 20px;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .filters {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      gap: 10px;
      flex-wrap: wrap;
    }
    button.action, .tab-button, .class-button {
      background-color: #15803d;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    button.action:hover, .tab-button:hover, .class-button:hover {
      background-color: #14532d;
    }
    .logout-button {
      background-color: #991b1b;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
    }
    .accordion {
      background-color: #15803d;
      color: white;
      cursor: pointer;
      padding: 10px;
      width: 60%;
      text-align: left;
      border: none;
      outline: none;
      transition: background-color 0.2s ease;
      border-radius: 4px;
      margin-bottom: 5px;
    }
    .accordion:hover {
      background-color: #14532d;
    }
    .panel {
      display: none;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 10px;
      padding-left: 10px;
    }
    .panel .student-button {
      background-color: #e6f4ea;
      color: #14532d;
      border: 1px solid #15803d;
      font-size: 13px;
      padding: 6px 10px;
      text-align: left;
      width: 40%;
      border-radius: 4px;
    }
    .panel .student-button:hover {
      background-color: #d3ead8;
    }
    .comment-entry {
      border-bottom: 1px solid #ccc;
      padding: 8px 0;
      white-space: pre-wrap;
    }
    .comment-entry button {
      background-color: #991b1b;
      color: white;
      border: none;
      padding: 4px 8px;
      border-radius: 4px;
      margin-top: 4px;
      cursor: pointer;
    }
    .tab-button.active {
      background-color: #0f5132;
    }
  </style>
  <script>
    function toggleAccordion(e) {
      const panel = e.nextElementSibling;
      panel.style.display = panel.style.display === "flex" ? "none" : "flex";
    }

    function renderClassAccordion(data) {
      const studentList = document.getElementById("studentList");
      studentList.innerHTML = "";

      for (const className in data) {
        const accordion = document.createElement("button");
        accordion.className = "accordion";
        accordion.innerText = className;
        accordion.onclick = function() { toggleAccordion(this); };

        const panel = document.createElement("div");
        panel.className = "panel";

        data[className].forEach(student => {
          const btn = document.createElement("button");
          btn.className = "student-button";
          btn.innerText = student;
          btn.onclick = function() { renderCommentsForStudent(student); };
          panel.appendChild(btn);
        });

        studentList.appendChild(accordion);
        studentList.appendChild(panel);
      }
    }

    function logout() {
      localStorage.removeItem("teacherId");
      location.href = "index.html";
    }

    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("teacherName").innerText = localStorage.getItem("teacherId") || "admin";

      const classGroups = {
        "Intro": ["곽이나", "최가림", "황도윤", "김시연"],
        "HighUP(LG2)": ["성예원", "조윤찬", "강유준", "진수혁", "정민서", "김태윤", "이지몽"],
        "FlyUP(LG3)": ["박신우", "김태윤(KTY)", "이채은", "이채율", "양인영", "최소은", "양지윤"],
        "Journeys2": ["임시윤", "조은정", "조혜인", "조은호", "오서원", "유은우"],
        "Phonics1": ["서주원", "김윤설", "변은찬"],
        "IAS": ["김채안", "최원홍"],
        "M1": ["이서현", "이시우", "이규성", "이현찬", "김진서", "정의윤", "정의담"],
        "M2": ["박태윤", "서완희", "김민주", "추선우"],
        "M3": ["유시영"],
        "Phonics2": ["이재백", "김시윤", "조윤서", "박설민", "김리온"],
        "JumpUP(LG1)": ["김여원"],
        "Arete": ["홍지훈"]
      };

      renderClassAccordion(classGroups);
    });

    function renderCommentsForStudent(studentName) {
      const historyDiv = document.getElementById("commentHistory");
      historyDiv.innerHTML = `<h3>${studentName} 평가 내역</h3><p>이곳에 평가 데이터 출력 예정</p>`;
    }

    function renderFilteredLogs() {
      // 필터링 로직 향후 구현 예정
    }

    function downloadAllCSV() {
      alert("CSV 다운로드 기능은 아직 구현되지 않았습니다.");
    }
  </script>
</head>
<body>
  <div class="container">
    <div class="top-bar">
      <h1>관리자 페이지</h1>
      <button class="logout-button" onclick="logout()">로그아웃</button>
    </div>
    <p>관리자 ID: <strong id="teacherName"></strong></p>

    <div id="viewTabs" class="filters"></div>

    <div class="layout">
      <div class="left-column">
        <div class="filters">
          <label for="monthSelect">월별 보기:</label>
          <input type="month" id="monthSelect" onchange="renderFilteredLogs()">
          <input type="hidden" id="selectedStudent">
          <button class="action" onclick="downloadAllCSV()">CSV 다운로드</button>
        </div>
        <div id="studentList" class="student-list"></div>
      </div>

      <div class="right-column">
        <div id="commentHistory"></div>
      </div>
    </div>
  </div>
</body>
</html>
